<div class="container admin-container">
  <div class="admin-header">
    <h1>Manage Movies</h1>
    <a href="/admin" class="btn">Back to Dashboard</a>
  </div>
  
  <div class="admin-actions">
    <a href="/admin/movies/new" class="btn btn-primary">Add New Movie</a>
  </div>
  
  <table class="admin-table">
    <thead>
      <tr>
        <th>Poster</th>
        <th>Title</th>
        <th>Director</th>
        <th>Year</th>
        <th>Genre</th>
        <th>Rating</th>
        <th>Reviews</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% if (movies.length === 0) { %>
        <tr>
          <td colspan="8" class="no-data">No movies yet. <a href="/admin/movies/new">Add one!</a></td>
        </tr>
      <% } else { %>
        <% movies.forEach(movie => { %>
          <tr>
            <td><img src="<%= movie.poster %>" alt="<%= movie.title %>" class="table-poster"></td>
            <td><%= movie.title %></td>
            <td><%= movie.director %></td>
            <td><%= movie.year %></td>
            <td><%= movie.genre.join(', ') %></td>
            <td>‚≠ê <%= movie.rating %>/10</td>
            <td><%= movie.reviews.length %></td>
            <td class="actions">
              <a href="/movie/<%= movie._id %>" class="btn-small">View</a>
              <a href="/admin/movies/<%= movie._id %>/edit" class="btn-small">Edit</a>
              <form action="/admin/movies/<%= movie._id %>?_method=DELETE" method="POST" style="display: inline;">
                <button type="submit" class="btn-small btn-danger" onclick="return confirm('Are you sure you want to delete this movie?')">Delete</button>
              </form>
            </td>
          </tr>
        <% }) %>
      <% } %>
    </tbody>
  </table>
</div>
